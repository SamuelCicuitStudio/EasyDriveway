<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=980, initial-scale=1"/>
  <title>ICM · Settings</title>
  <link rel="stylesheet" href="css/settings.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <div class="frame">
    <!-- Top Bar -->
    <div class="topbar">
      <div class="brand">
        <div class="logo">ICM</div>
        <div class="title">Interface Control Module</div>
      </div>
      <nav class="nav">
        <a href="/home.html">Home</a>
        <a href="/settings.html" class="active">Settings</a>
        <a href="/wifi.html">Networking</a>
        <a href="/topology.html">Topology</a>
        <a href="/live.html">Live</a>
      </nav>
      <div class="logout">
        <button id="logoutBtn" title="Logout">Logout</button>
      </div>
    </div>

<!-- Hero (gear SVG, improved) -->
<div class="hero-card">
  <svg class="home-hero" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
    <defs>
      <linearGradient id="grad-hero" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#00ffae"/>
        <stop offset="100%" stop-color="#18c99b"/>
      </linearGradient>
    </defs>
    <path fill="url(#grad-hero)" d="M19.43 12.98c.04-.32.07-.65.07-.98s-.03-.66-.07-.98l2.11-1.65a.5.5 0 0 0 .12-.66l-2-3.46a.5.5 0 0 0-.61-.22l-2.49 1a7.07 7.07 0 0 0-1.7-.98l-.38-2.65A.5.5 0 0 0 14 2h-4a.5.5 0 0 0-.5.42l-.38 2.65c-.63.25-1.2.58-1.7.98l-2.49-1a.5.5 0 0 0-.61.22l-2 3.46a.5.5 0 0 0 .12.66l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65a.5.5 0 0 0-.12.66l2 3.46c.14.24.42.34.68.22l2.49-1c.5.4 1.07.73 1.7.98l.38 2.65c.04.25.25.42.5.42h4c.25 0 .46-.17.5-.42l.38-2.65c.63-.25 1.2-.58 1.7-.98l2.49 1c.26.12.54.02.68-.22l2-3.46a.5.5 0 0 0-.12-.66l-2.11-1.65zM12 15.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7z"/>
  </svg>
  <div class="hero-text">
    <h2>Settings</h2>
    <p>Identity, versions, and system behavior</p>
  </div>
</div>

    <!-- Content -->
    <div class="wrap">
      <div class="grid grid-2">

        <!-- System Info -->
        <section class="card card-system">
          <header>
            <h3>System Info</h3>
            <span id="modeBadge" class="badge">AUTO</span>
          </header>
          <div class="info-block row smallgap">
            <div class="kv">
              <label>Mode</label>
              <div class="value"><div class="switch">
                <span class="lbl">MODE</span>
                <input id="modeToggle" type="checkbox" disabled aria-label="Manual/Auto toggle"/>
                <span class="slider" aria-hidden="true"></span>
                <span id="modeHint" class="hint">Auto</span>
              </div></div>
            </div>
            <div class="kv">
              <label>Wi‑Fi</label>
              <div id="wifiVal" class="value text-info">—</div>
            </div>
            <div class="kv">
              <label>Uptime</label>
              <div id="uptime" class="value text-muted">—</div>
            </div>
            <div class="kv lg">
              <label>Now</label>
              <div id="timeNow" class="value text-info">—</div>
              <div class="sub">RTC preferred; system clock fallback</div>
            </div>
          </div>
          <div id="toast" class="toast" hidden>Saved</div>
        </section>

        <!-- Identity -->
        <section class="card">
          <header><h3>Identity</h3></header>
          <div class="row smallgap">
            <div class="kv">
              <label>Device ID</label>
              <input id="devId" class="value mono" readonly disabled placeholder="ICM01"/>
            </div>
            <div class="kv">
              <label>Host Name</label>
              <input id="hostName" class="value mono" readonly disabled placeholder="ICM-XXXXXX"/>
            </div>
            <div class="kv">
              <label>Friendly Name</label>
              <input id="friendlyName" class="value" placeholder="ICM_xxx"/>
            </div>
          </div>
          <div class="row smallgap">
            <div class="kv">
              <label>BLE Name</label>
              <input id="bleName" class="value" placeholder="ICM_xxx"/>
            </div>
            <div class="kv">
              <label>BLE PIN</label>
              <input id="blePin" class="value mono" placeholder="123457" inputmode="numeric" maxlength="6"/>
            </div>
            <div class="kv">
              <label>Access PIN</label>
              <input id="passPin" class="value mono" placeholder="12345678" maxlength="8"/>
            </div>
          </div>
          <div class="row">
            <button id="btnSaveIdentity" class="btn">Save Identity</button>
          </div>
        </section>

        <!-- Versions -->
        <section class="card">
          <header><h3>Versions</h3></header>
          <div class="row smallgap">
            <div class="kv">
              <label>FW Version</label>
              <input id="fwVer" class="value mono" readonly disabled placeholder="1.0.0"/>
              <div class="sub">Low‑level firmware</div>
            </div>
            <div class="kv">
              <label>SW Version</label>
              <input id="swVer" class="value mono" readonly disabled placeholder="1.0.0"/>
              <div class="sub">Application software</div>
            </div>
            <div class="kv">
              <label>HW Revision</label>
              <input id="hwVer" class="value mono" readonly disabled placeholder="A1"/>
              <div class="sub">Board revision</div>
            </div>
          </div>
          <div class="row smallgap">
            <div class="kv lg">
              <label>Build</label>
              <input id="buildStr" class="value mono" readonly disabled placeholder="2025-08-01T12:00Z #abcd123"/>
              <div class="sub">Build date / git hash</div>
            </div>
          </div>
          <div class="row">
            <button id="btnSaveVersions" class="btn">Save Versions</button>
          </div>
        </section>

        <!-- Networking (STA) -->
        <section class="card">
          <header><h3>Networking (STA)</h3></header>
          <div class="row smallgap">
            <div class="kv">
              <label>SSID</label>
              <input id="wifiStaSsid" class="value" placeholder="YourWiFi"/>
            </div>
            <div class="kv">
              <label>Password</label>
              <input id="wifiStaPass" class="value" type="password" placeholder="••••••••"/>
            </div>
            <div class="kv">
              <label>DHCP</label>
              <div class="value"><div class="switch">
                <span class="lbl">DHCP</span>
                <input id="wifiStaDhcp" type="checkbox"/>
                <span class="slider" aria-hidden="true"></span>
                <span class="hint">Use router DHCP</span>
              </div></div>
            </div>
          </div>
          <div class="row">
            <button id="btnSaveNetwork" class="btn">Save Network</button>
          </div>
        </section>

        <!-- Radio / ESP‑NOW -->
        <section class="card">
          <header><h3>Radio / ESP‑NOW</h3></header>
          <div class="row smallgap">
            <div class="kv">
              <label>Channel</label>
              <input id="espCh" class="value mono" inputmode="numeric" placeholder="6"/>
            </div>
            <div class="kv">
              <label>System Mode</label>
              <select id="espMode" class="value">
                <option value="AUTO">AUTO</option>
                <option value="MANUAL">MANUAL</option>
              </select>
            </div>
          </div>
          <div class="row">
            <button id="btnSaveRadio" class="btn">Save Radio</button>
          </div>
        </section>

        <!-- Web Access -->
        <section class="card">
          <header><h3>Web Access</h3></header>
          <div class="row smallgap">
            <div class="kv">
              <label>Username</label>
              <input id="webUser" class="value mono" placeholder="admin"/>
            </div>
            <div class="kv">
              <label>Password</label>
              <input id="webPass" class="value" type="password" placeholder="********"/>
            </div>
          </div>
          <div class="row">
            <button id="btnSaveAccess" class="btn">Save Access</button>
          </div>
        </section>

        <!-- Actions -->
        <section class="card">
          <header><h3>Actions</h3></header>
          <div class="row">
            <div class="switch">
              <span class="lbl">Buzzer Feedback</span>
              <input id="buzzerToggle" type="checkbox"/>
              <span class="slider" aria-hidden="true"></span>
            </div>
            <div class="controls">
              <button id="btnReset" class="btn warn">Factory Reset</button>
              <button id="btnRestart" class="btn danger">Restart</button>
            </div>
          </div>
        </section>

      </div>
    </div>
  </div>

  <script src="js/settings.js"></script>
  <!-- <script src="mock/settings.mock.js"></script> -->
</body>
</html>
